

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parts Implemented by Mehmet Altuner &mdash; ITUCSDB1963  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Parts Implemented by Uğur Ali Kaplan" href="kaplan.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ITUCSDB1963
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#database-design">Database Design</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#code">Code</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="berkay.html">Parts Implemented by Berkay Olgun</a></li>
<li class="toctree-l3"><a class="reference internal" href="kaplan.html">Parts Implemented by Uğur Ali Kaplan</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Parts Implemented by Mehmet Altuner</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#people">People</a></li>
<li class="toctree-l4"><a class="reference internal" href="#students">Students</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lessons">Lessons</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ITUCSDB1963</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Developer Guide</a> &raquo;</li>
        
      <li>Parts Implemented by Mehmet Altuner</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/mehmet.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parts-implemented-by-mehmet-altuner">
<h1>Parts Implemented by Mehmet Altuner<a class="headerlink" href="#parts-implemented-by-mehmet-altuner" title="Permalink to this headline">¶</a></h1>
<div class="section" id="people">
<h2>People<a class="headerlink" href="#people" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All table creations exist in db_init.py file.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All SQL operations in python files are wrapped with try-except statements in order to avoid and validate errors</p>
</div>
<div class="section" id="creation">
<h3>1. Creation<a class="headerlink" href="#creation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span>    <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">PEOPLE</span> <span class="p">(</span>
<span class="n">P_ID</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
<span class="n">NAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="n">EMAIL</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="k">UNIQUE</span><span class="p">,</span>
<span class="n">PHOTO</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span>
<span class="n">PASSWORD</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">280</span><span class="p">),</span>
<span class="k">TYPE</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="adding">
<h3>2. Adding<a class="headerlink" href="#adding" title="Permalink to this headline">¶</a></h3>
<p>Adding new person is handled in <em>add_person()</em> method in <em>database.py</em> file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_person</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">):</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;INSERT INTO PEOPLE (NAME, EMAIL, PHOTO, PASSWORD, TYPE) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">mail</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">photo</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">type</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;SELECT P_ID FROM PEOPLE WHERE EMAIL = </span><span class="si">%s</span><span class="s2">&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">person</span><span class="o">.</span><span class="n">mail</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="n">person</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Add Person Error : &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="k">return</span> <span class="n">person</span>
</pre></div>
</div>
<p><em>add_person()</em> method takes a <em>people</em> object as a parameter named <em>person</em>. (Person object is defined in models/people.py).
After inserting the new value into the table, its auto-incremented id instance is selected by another statement and written into the person instance to be used in the future.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The email instance is unique</p>
</div>
</div>
<div class="section" id="reading">
<h3>3. Reading<a class="headerlink" href="#reading" title="Permalink to this headline">¶</a></h3>
<p>Reading from person table is implemented in the method <em>get_person()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_person</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p_id</span><span class="p">):</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM PEOPLE WHERE P_ID = </span><span class="si">%s</span><span class="s2">&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">p_id</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">person</span> <span class="o">=</span> <span class="n">People</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">person</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
<p><em>get_person()</em> method takes an integer named <em>p_id</em> and returns the data of the column having the id equal to*p_id*.</p>
</div>
<div class="section" id="updating">
<h3>4. Updating<a class="headerlink" href="#updating" title="Permalink to this headline">¶</a></h3>
<p>Deleting operation is handled in the method <em>update_person()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update_person</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person_id</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="n">person</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_person</span><span class="p">(</span><span class="n">person_id</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">person</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">person</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;UPDATE PEOPLE SET &quot;</span>
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">statement</span> <span class="o">+=</span> <span class="n">attr</span> <span class="o">+</span> <span class="s2">&quot; = </span><span class="si">%s</span><span class="s2"> , &quot;</span>
            <span class="n">statement</span> <span class="o">+=</span> <span class="n">attrs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; = </span><span class="si">%s</span><span class="s2"> &quot;</span>
            <span class="n">statement</span> <span class="o">+=</span> <span class="s2">&quot; WHERE p_id = </span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">person_id</span><span class="p">)</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Update Person Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>The structure of this method is a bit different than other operations’ methods. It takes three parameters:</dt><dd><ul class="simple">
<li><p>person_id: An integer that states the person column to be updated.</p></li>
<li><p>attrs: A list of names of the attributes that we want to update.</p></li>
<li><p>values: The new values of the person object.</p></li>
</ul>
</dd>
</dl>
<p>The idea is that each instance of list <em>attr</em> must coincide with the each instance of the list <em>values</em>.
<em>UPDATE PEOPLE SET person.attrs[i] = values[i] where id = p_id</em></p>
</div>
<div class="section" id="deleting">
<h3>4. Deleting<a class="headerlink" href="#deleting" title="Permalink to this headline">¶</a></h3>
<p>By the nature of the table itself, there is no need to implement a deletion operation for this table. It is simply a base class. We have stated <em>ON DELETE CASCADE</em> on each table we reference people from.</p>
</div>
</div>
<div class="section" id="students">
<h2>Students<a class="headerlink" href="#students" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>1. Creation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span>    <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">STUDENTS</span> <span class="p">(</span>
<span class="n">STU_ID</span> <span class="nb">INTEGER</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">,</span>
<span class="nb">NUMBER</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="n">EARNED_CREDITS</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="n">DEPARTMENT</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">FACULTY</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">CLUB</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="n">LAB</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">STU_ID</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">PEOPLE</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span><span class="p">,</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">DEPARTMENT</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">DEPARTMENTS</span><span class="p">,</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">FACULTY</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">FACULTIES</span><span class="p">,</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">CLUB</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">CLUBS</span><span class="p">,</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">LAB</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">LABS</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Student’s pkey is also the fkey for the People table since People can only be students if they are students.</p>
</div>
</div>
<div class="section" id="id2">
<h3>2. Adding<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Adding operation is handled in the method <em>add_student()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student</span><span class="p">):</span>
<span class="n">person</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">get_person_obj</span><span class="p">())</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;INSERT INTO STUDENTS (STU_ID, NUMBER, EARNED_CREDITS, DEPARTMENT, FACULTY, CLUB, LAB) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">person</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">cred</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">depart</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">facu</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">club</span><span class="p">,</span>
                <span class="n">student</span><span class="o">.</span><span class="n">lab</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>3. Reading<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Reading operation is handled in the method <em>get_student()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stu_id</span><span class="p">):</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM STUDENTS WHERE STU_ID = </span><span class="si">%s</span><span class="s2">&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">stu_id</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Get Student Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
<p>Selects the student that has the id as same as the stu_id which are taken by a parameter.</p>
</div>
<div class="section" id="id4">
<h3>4. Updating<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Updating operation is handled in the method <em>update_student()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_key</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_student</span><span class="p">(</span><span class="n">student_key</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">student</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">student</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;UPDATE STUDENTS SET &quot;</span>
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">statement</span> <span class="o">+=</span> <span class="n">attr</span> <span class="o">+</span> <span class="s2">&quot; = </span><span class="si">%s</span><span class="s2"> , &quot;</span>
            <span class="n">statement</span> <span class="o">+=</span> <span class="n">attrs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; = </span><span class="si">%s</span><span class="s2"> &quot;</span>
            <span class="n">statement</span> <span class="o">+=</span> <span class="s2">&quot; WHERE stu_id = </span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">student_key</span><span class="p">)</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Update Student Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
<p>The same approach is followed as the update operation of the People table.
<em>UPDATE STUDENTS SET students.attr[i] = values[i] where stu_id = student_key</em></p>
</div>
<div class="section" id="id5">
<h3>5. Deleting<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Updating operation is handled in the method <em>delete_student()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">delete_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_key</span><span class="p">):</span>
<span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_student</span><span class="p">(</span><span class="n">student_key</span><span class="p">)</span>

<span class="k">if</span> <span class="n">student</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;DELETE FROM STUDENTS WHERE stu_id = </span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">student_key</span><span class="p">]</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Delete Student Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you delete a student, the People instance it references to is also deleted.</p>
</div>
</div>
</div>
<div class="section" id="lessons">
<h2>Lessons<a class="headerlink" href="#lessons" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>1. Creation<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">LESSONS</span> <span class="p">(</span>
    <span class="n">LESSON_ID</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">CAP</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="n">ENROLLED</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="nb">DATE</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">280</span><span class="p">),</span>
    <span class="n">CRN</span> <span class="nb">INTEGER</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">CODE</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
    <span class="n">INSTRUCTOR</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="k">LOCATION</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="n">ASSISTANT</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="n">CREDIT</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">INSTRUCTOR</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">INSTRUCTORS</span><span class="p">(</span><span class="n">INS_ID</span><span class="p">),</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">ASSISTANT</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">ASSISTANTS</span><span class="p">(</span><span class="n">AS_ID</span><span class="p">),</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="k">LOCATION</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">CLASSES</span><span class="p">(</span><span class="n">CL_ID</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>2. Adding<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Adding operation is handled in the method <em>create_lesson()</em> in <em>database.py</em> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_lesson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lesson</span><span class="p">):</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;INSERT INTO LESSONS (CRN, DATE, CODE, INSTRUCTOR, LOCATION, ASSISTANT, CREDIT, CAP, ENROLLED)</span>
<span class="s2">                        VALUES(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">lesson</span><span class="o">.</span><span class="n">crn</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">instructor</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">assistant</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">credit</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">cap</span><span class="p">,</span> <span class="n">lesson</span><span class="o">.</span><span class="n">enrolled</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Create Lesson Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>3. Reading<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Reading operation is handled in the methods <em>search_lesson_by_crn()</em> and <em>search_lesson_by_instructor()</em> in <em>database.py</em> file.
The obvious difference between the methods is that one of them selects the lessons by the given CRN while the other does the same operation with the name of its instructor.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_lesson_by_crn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crn</span><span class="p">):</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT * FROM LESSONS</span>
<span class="s2">        JOIN INSTRUCTORS ON (LESSONS.instructor = INSTRUCTORS.ins_id)</span>
<span class="s2">        JOIN PEOPLE ON (INSTRUCTORS.ins_id = PEOPLE.p_id)</span>
<span class="s2">        JOIN CLASSES ON (LESSONS.location = CLASSES.cl_id)</span>
<span class="s2">        WHERE LESSONS.crn = </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">crn</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Search Lesson Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_lesson_by_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor</span><span class="p">):</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">dbapi2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT * FROM</span>
<span class="s2">        LESSONS</span>
<span class="s2">        JOIN INSTRUCTORS ON (LESSONS.instructor = INSTRUCTORS.ins_id)</span>
<span class="s2">        JOIN PEOPLE ON (INSTRUCTORS.ins_id = PEOPLE.p_id)</span>
<span class="s2">        JOIN CLASSES ON (LESSONS.location = CLASSES.cl_id)</span>
<span class="s2">        WHERE PEOPLE.name = </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">instructor</span><span class="p">]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Search Lesson Error: &quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
<p>Here in both of the methods. JOIN operations are used.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="kaplan.html" class="btn btn-neutral float-left" title="Parts Implemented by Uğur Ali Kaplan" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ITUCSDB1963

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>